<!DOCTYPE html>
<html>
  <head>
    <style>

	html{
      		height: 100%;
	}

	body{
		background-image: linear-gradient(#FFC371, #FF5F6D);
		background-repeat: no-repeat;	
		background-attachment: fixed;
		height: 100%;
	}

	button{
        	position: relative;
        	background: #FFF7;
        	border-style: none;
        	border-radius: 50%;
		width: 12vh;
		box-shadow: 2px 2px #0003;
		padding-top: 12vh;
		margin: 1%;
	}

	.btn-contents{
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
	}

	.big-btn{
		width: 25vh;
		padding-top: 25vh;
	}

	.inc-img{
		transform: rotate(180deg);
	}

	.arrow-img{
		position: absolute;
		width: 65%;
		left: 17.5%;
		top: 17.5%;
	}

	.bell-img{
		position: absolute;
		width: 80%;
		left: 10%;
		top: 8%;
        }

	.flex-container{
		display: flex;
		flex-direction: column;
		height: 100%;
		justify-content: center;
		align-items: center;
	}

	.tally{
		font-size: 7vh;
		margin: 0;
		font-weight: bold;
		color: #FF5F6D;
		background: transparent;
		border: none;
		position: absolute;
		top: 38%;
		left: 0px;
		width: 100%;
	}
    </style>
  </head>

  <body>
	<div class="flex-container">

	<button class="big-btn" onclick="clickBell()">
		<div class="btn-contents">
			<img class="bell-img" src="/images/bell.png">
			<p id="tally_text" class="tally">0</p>
		</div>
	</button>

	<button class="inc-btn" onclick="clickIncrement()">
		<div class="btn-contents">
			<img class="arrow-img inc-img" src="/images/arrow.png">
		</div>
	</button>

	<button class="dec-btn" onclick="clickDecrement()">
		<div class="btn-contents">
			<img class="arrow-img dec-img" src="/images/arrow.png">
		</div>
	</button>

    </div>
  </body>
  <script>

		function update_tally(){
			var xhttp = new XMLHttpRequest();
				xhttp.onreadystatechange = function(){
					if (this.readyState == 4 && this.status == 200){
						document.getElementById("tally_text").innerHTML = 
						this.responseText;
					}
				}
				xhttp.open("GET", "/disfluencies", true);
				xhttp.send();
		}

		var upd_id = setInterval(update_tally, 3000)

		function clickBell() {
			sendData(1, false)
		}

		function clickIncrement() {
			sendData(1);
		}
		
		function clickDecrement() {
			sendData(-1);
		}

		function sendData(disfluencies, mute_ding = true) {
			var xhttp = new XMLHttpRequest();
			xhttp.open("POST", "/disfluencies", true);
			xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
			xhttp.send("disfluencies=" + disfluencies + "&mute_ding=" + mute_ding);
			setTimeout(update_tally, 100)
		}
  </script>
</html>
